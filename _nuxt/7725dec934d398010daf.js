(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{767:function(e,t,r){"use strict";r.r(t),function(e){r(365),r(56),r(187),r(366),r(113),r(140),r(111);var n,o,c,m,d,f,l,h,x,k,T,v,S,O,A,j,w,y,E,R,_,I,F,P,B,G,H,D,C,L,U,N,K,V,X,W,z,M,Y,J,Z,Q,$,ee,te,re,ne,ae,se,oe,ce,ue,ie,me,de,pe,fe,le,he,be,xe,ke,ge,Te,ve,Se,Oe,Ae,je=r(43),we=(r(229),r(53),r(2)),ye=(r(102),r(103),r(41),r(6)),Ee=r(4),Re=r(678),_e=r(52),Ie=r(0),Fe=r(230),Pe=r(509),Be=r(144),Ge=r(1237).ethers,He={dappFee:function(e){return e.isVIP,0},txFee:function(e){if(e.isVIP)return 0;try{return Object(Ie.a)(e.extraFee).gt(Object(Ie.a)(e.txFee))?Object(Ie.a)(e.extraFee).toString(10):e.txFee}catch(t){return e.txFee}},vipFee:function(e){try{return Object(Ee.fromWei)(e.vipFee,"ether")}catch(e){return"1"}},referralFee:function(e){try{return Object(Ee.fromWei)(e.referralFee,"ether")}catch(e){return"0.01"}},delegatorFee:function(e){try{return Object(Ee.fromWei)(e.delegatorFee,"ether")}catch(e){return"1"}},priorityFee:function(e,t,r){try{var n=e.gasPrice,o=r.metamask.networkBaseFee,c=Object(Ie.a)(n).minus(Object(Ie.a)(o)).toNumber();return c<1&&(c=1),c}catch(e){return console.info(e),1}},bulksenderInstance:function(e,t,r,n){return Object(we.a)(regeneratorRuntime.mark((function e(){var t,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.metamask,o=t.ethAccount,c=t.netId,m=_e.a["netId".concat(c)].bulksenderContract,e.next=4,n["metamask/web3"]();case 4:return d=e.sent,e.abrupt("return",new d.eth.Contract(Re,m,{from:o}));case 6:case"end":return e.stop()}}),e)})))}},De={addSuccessTx:(Ae=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.tx,n("ADD_SUCCESS_TXS",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return Ae.apply(this,arguments)}),addFailedTx:(Oe=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.tx,n("ADD_FAILED_TXS",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return Oe.apply(this,arguments)}),setUsedBurnerKey:(Se=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.usedBurnerKey,n("SET_USED_BURNER_KEY",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return Se.apply(this,arguments)}),setGasPrice:(ve=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.gasPrice,n("SET_GAS_PRICE",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return ve.apply(this,arguments)}),setUsedSimple:(Te=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.simple,n("SET_SIMPLE",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return Te.apply(this,arguments)}),setExtraFee:(ge=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.extraFee,n("SET_EXTRA_FEE",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return ge.apply(this,arguments)}),createNewAddress:(ke=Object(we.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,e.abrupt("return",(new Fe).create());case 2:case"end":return e.stop()}}),e)}))),function(e){return ke.apply(this,arguments)}),saveReferralAddress:(xe=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,address;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,address=r.address,n("SET_REFERRAL_ADDRESS",address);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return xe.apply(this,arguments)}),saveBurnerKey:(be=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,n=t.commit,o=r.burnerKey,n("SET_BURNER_KEY",o);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return be.apply(this,arguments)}),createBurnKey:(he=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,t.state,t.getters,n=t.commit,e.next=3,r("createNewAddress");case 3:return o=e.sent,n("SET_BURNER_KEY",o),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(e){return he.apply(this,arguments)}),loadAccountByPrivateKey:(le=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dispatch,t.state,t.getters,t.commit,n=r.privateKey,e.prev=2,n.startsWith("0x")||(n="0x"+n),66==n.length){e.next=6;break}return e.abrupt("return",!1);case 6:return e.abrupt("return",(new Fe).privateKeyToAccount(n));case 9:return e.prev=9,e.t0=e.catch(2),console.info(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e,t){return le.apply(this,arguments)}),createNewUniqueId:(fe=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,r=Date.parse(new Date),n=parseInt(100*Math.random()),e.abrupt("return",Object(Ee.asciiToHex)(r+"_"+n));case 4:case"end":return e.stop()}}),e)}))),function(e){return fe.apply(this,arguments)}),createNewUniqueId_V1:(pe=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,r.fromAddress,r.toAddress,n=Date.parse(new Date),o=10*Math.random(),e.abrupt("return",Object(Ee.asciiToHex)(n+"_"+o));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return pe.apply(this,arguments)}),createNewUniqueId_V2:(de=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.commit,n=r.fromAddress,e.abrupt("return",Object(Ee.padLeft)(Object(Ee.hexToBytes)(n,32)));case 3:case"end":return e.stop()}}),e)}))),function(e,t){return de.apply(this,arguments)}),getBulksenderContractAddress:(me=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,r=t.getters,n=t.commit,e.next=3,r.bulksenderInstance();case 3:o=e.sent,n("SET_BULKSENDER_ADDRESS",o._address);case 5:case"end":return e.stop()}}),e)}))),function(e){return me.apply(this,arguments)}),clearUsedParams:(ie=Object(we.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.dispatch,r=t.commit,t.rootState,r("CLEAR");case 2:case"end":return e.stop()}}),e)}))),function(e){return ie.apply(this,arguments)}),initBaseParams:(ue=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f,l,h,x,k,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,r=t.getters,n=t.dispatch,o=t.commit,c=t.rootState,e.next=3,r.bulksenderInstance();case 3:m=e.sent,o("SET_BULKSENDER_ADDRESS",m._address),d=c.metamask,f=d.netId,l=d.gasPrice,h=_e.a["netId".concat(f)].explorerUrl,o("SET_TX_URL",h.tx),o("SET_ADDRESS_URL",h.address),o("SET_GAS_PRICE",l.fast);try{x=_e.a["netId".concat(f)],k=x.useConfigBlockByteSize,T=x.blockConfig,k&&T&&T.maxBytesSize&&o("SET_MAX_BLOCK_BYTES_SIZE",T.maxBytesSize)}catch(e){}n("getTxFee"),n("getVIPFee"),n("getVIPStatus"),n("getReferralFee"),n("getDelegatorFee");case 16:case"end":return e.stop()}}),e)}))),function(e){return ue.apply(this,arguments)}),getChainId:(ce=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,r=t.rootState,n=r.metamask,o=n.netId,"walletLink"!=n.providerName){e.next=4;break}return e.abrupt("return",1);case 4:return e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)}))),function(e){return ce.apply(this,arguments)}),getNFTActionType:(oe=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,n=t.rootState,t.rootGetters,o=n.token.tokenType,e.t0=o,e.next=1===e.t0?6:2===e.t0?8:10;break;case 6:return r.simple,e.abrupt("break",10);case 8:return e.abrupt("break",10);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)}))),function(e){return oe.apply(this,arguments)}),getTxFee:(se=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var m=function(){var f=Object(we.a)(regeneratorRuntime.mark((function f(l){var h,x,k,T,data,v,S;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,x=void 0===h?1:h,x++,f.prev=2,k=r.metamask.ethAccount,f.next=6,c.bulksenderInstance();case 6:return T=f.sent,data=T.methods.txFee().encodeABI(),v={method:"eth_call",params:[{from:k,to:T._address,data:data},"latest"],from:k},f.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=f.sent,S=Object(Ee.hexToNumberString)(S),n("SET_TX_FEE",S),console.log("Tx fee",S),e(S),f.next=21;break;case 18:f.prev=18,f.t0=f.catch(2),x>=d?t(f.t0):m({retryAttempt:x});case 21:case"end":return f.stop()}}),f,null,[[2,18]])})));return function(e){return f.apply(this,arguments)}}();m({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return se.apply(this,arguments)}),getVIPFee:(ae=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var m=function(){var f=Object(we.a)(regeneratorRuntime.mark((function f(l){var h,x,k,T,data,v,S;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,x=void 0===h?1:h,x++,f.prev=2,k=r.metamask.ethAccount,f.next=6,c.bulksenderInstance();case 6:return T=f.sent,data=T.methods.VIPFee().encodeABI(),v={method:"eth_call",params:[{from:k,to:T._address,data:data},"latest"],from:k},f.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=f.sent,S=Object(Ee.hexToNumberString)(S),n("SET_VIP_FEE",S),console.log("VIP fee",S),e(S),f.next=21;break;case 18:f.prev=18,f.t0=f.catch(2),x>=d?t(f.t0):m({retryAttempt:x});case 21:case"end":return f.stop()}}),f,null,[[2,18]])})));return function(e){return f.apply(this,arguments)}}();m({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return ae.apply(this,arguments)}),getDelegatorFee:(ne=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"],f=d.rpcCallRetryAttempt,d.delegatorFeatureEnable){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",new Promise((function(e,t){var m=function(){var d=Object(we.a)(regeneratorRuntime.mark((function d(l){var h,x,k,T,data,v,S;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return h=l.retryAttempt,x=void 0===h?1:h,x++,d.prev=2,k=r.metamask.ethAccount,d.next=6,c.bulksenderInstance();case 6:return T=d.sent,data=T.methods.delegatorFee(k).encodeABI(),v={method:"eth_call",params:[{from:k,to:T._address,data:data},"latest"],from:k},d.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=d.sent,S=Object(Ee.hexToNumberString)(S),n("SET_DELEGATOR_FEE",S),console.log("Delegator fee",S),e(S),d.next=21;break;case 18:d.prev=18,d.t0=d.catch(2),x>=f?t(d.t0):m({retryAttempt:x});case 21:case"end":return d.stop()}}),d,null,[[2,18]])})));return function(e){return d.apply(this,arguments)}}();m({})})));case 5:case"end":return e.stop()}}),e)}))),function(e){return ne.apply(this,arguments)}),checkVIPStatus:(re=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState,t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=r.walletAddress,f=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(we.a)(regeneratorRuntime.mark((function m(l){var h,x,k,T,data,v,S;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return h=l.retryAttempt,x=void 0===h?1:h,x++,m.prev=2,k=n.metamask.ethAccount,m.next=6,c.bulksenderInstance();case 6:return T=m.sent,data=T.methods.isVIP(d).encodeABI(),v={method:"eth_call",params:[{from:k,to:T._address,data:data},"latest"],from:k},m.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=m.sent,S=Object(Ee.hexToNumberString)(S),e(S=1==S||"1"==S),m.next=20;break;case 17:m.prev=17,m.t0=m.catch(2),x>=f?t(m.t0):r({retryAttempt:x});case 20:case"end":return m.stop()}}),m,null,[[2,17]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return re.apply(this,arguments)}),addToVIPListByDelegator:(te=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,d=r.walletAddress,f=n.checkSimpleTimes,c.metamask.netId,e.abrupt("return",new Promise((function(e,t){var r=function(){var l=Object(we.a)(regeneratorRuntime.mark((function l(h){var x,k,T,v,S,O,A,data,j,w,y,E,R,_;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return x=h.retryAttempt,k=void 0===x?1:x,k++,l.prev=2,T=c.metamask.gasPrice.fast,v=c.metamask.ethAccount,l.next=7,o.bulksenderInstance();case 7:return S=l.sent,O=S._address,A=[d],data=S.methods.addToVIPListByDelegator(A).encodeABI(),j=Object(Ie.a)(n.delegatorFee).times(A.length).toString(),w=0,y={method:"eth_estimateGas",params:[{from:v,to:O,data:data,value:Object(Ee.toHex)(j)}],from:v},l.next=16,m("metamask/sendAsync",y,{root:!0});case 16:return E=l.sent,w=Object(Ee.hexToNumber)(E)+5e3,R={method:"eth_sendTransaction",params:[{from:v,to:O,gas:Object(Ee.numberToHex)(w),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(T.toString(),"gwei")),value:Object(Ee.toHex)(j),data:data}],from:v},l.next=21,m("_formatEIP1559Transaction",{callParams:R});case 21:return R=l.sent,l.next=24,m("metamask/sendAsync",R,{root:!0});case 24:_=l.sent,e(_),l.next=37;break;case 28:if(l.prev=28,l.t0=l.catch(2),!(k>=f||4001==l.t0.code)){l.next=34;break}t(l.t0),l.next=37;break;case 34:return l.next=36,m("checkEIP1559Error",{e:l.t0});case 36:r({retryAttempt:k});case 37:case"end":return l.stop()}}),l,null,[[2,28]])})));return function(e){return l.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return te.apply(this,arguments)}),getReferralFee:(ee=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.rootState,n=t.commit,o=t.dispatch,c=t.getters,m=t.rootGetters,t.state,d=m["metamask/networkConfig"].rpcCallRetryAttempt,e.abrupt("return",new Promise((function(e,t){var m=function(){var f=Object(we.a)(regeneratorRuntime.mark((function f(l){var h,x,k,T,data,v,S;return regeneratorRuntime.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return h=l.retryAttempt,x=void 0===h?1:h,x++,f.prev=2,k=r.metamask.ethAccount,f.next=6,c.bulksenderInstance();case 6:return T=f.sent,data=T.methods.referrerFee().encodeABI(),v={method:"eth_call",params:[{from:k,to:T._address,data:data},"latest"],from:k},f.next=11,o("metamask/sendAsync",v,{root:!0});case 11:S=f.sent,S=Object(Ee.hexToNumberString)(S),n("SET_REFERRAL_FEE",S),console.log("Referral reward",S),e(S),f.next=21;break;case 18:f.prev=18,f.t0=f.catch(2),x>=d?t(f.t0):m({retryAttempt:x});case 21:case"end":return f.stop()}}),f,null,[[2,18]])})));return function(e){return f.apply(this,arguments)}}();m({})})));case 3:case"end":return e.stop()}}),e)}))),function(e){return ee.apply(this,arguments)}),getVIPStatus:($=Object(we.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.rootState,r=t.commit,t.dispatch,t.getters,t.rootGetters,t.state,r("SET_IS_VIP",!0),e.abrupt("return");case 5:case"end":return e.stop()}}),e)}))),function(e){return $.apply(this,arguments)}),buyVIP:(Q=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootState,t.rootGetters,n=t.dispatch,o=t.commit,Object(je.a)(r),e.next=4,n("_buyVIP",{});case 4:return c=e.sent,o("SET_VIP_TX_HASH",c),o("SET_VIP_TX_STATUS",0),n("checkBulksenderVIPBuyingTransactionStatus",{txHash:c}),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)}))),function(e,t){return Q.apply(this,arguments)}),_buyVIP:(Z=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,Object(je.a)(r),d=n.checkSimpleTimes,f=c.metamask.netId,e.abrupt("return",new Promise((function(e,t){var r=function(){var l=Object(we.a)(regeneratorRuntime.mark((function l(h){var x,k,T,v,S,O,data,A,j,w,y,E;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return x=h.retryAttempt,k=void 0===x?1:x,k++,l.prev=2,T=c.metamask.gasPrice.fast,v=c.metamask.ethAccount,l.next=7,o.bulksenderInstance();case 7:if(S=l.sent,O=S._address,data=S.methods.registerVIP().encodeABI(),A=1e5,100!=f){l.next=17;break}return j={method:"eth_estimateGas",params:[{from:v,to:O,data:data,value:Object(Ee.toHex)(n.vipFee)}],from:v},l.next=15,m("metamask/sendAsync",j,{root:!0});case 15:w=l.sent,A=Object(Ee.hexToNumber)(w)+5e3;case 17:return y={method:"eth_sendTransaction",params:[{from:v,to:O,gas:Object(Ee.numberToHex)(A),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(T.toString(),"gwei")),value:Object(Ee.toHex)(n.vipFee),data:data}],from:v},l.next=20,m("_formatEIP1559Transaction",{callParams:y});case 20:return y=l.sent,l.next=23,m("metamask/sendAsync",y,{root:!0});case 23:E=l.sent,e(E),l.next=36;break;case 27:if(l.prev=27,l.t0=l.catch(2),!(k>=d||4001==l.t0.code)){l.next=33;break}t(l.t0),l.next=36;break;case 33:return l.next=35,m("checkEIP1559Error",{e:l.t0});case 35:r({retryAttempt:k});case 36:case"end":return l.stop()}}),l,null,[[2,27]])})));return function(e){return l.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return Z.apply(this,arguments)}),_initBulksender:(J=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,Object(je.a)(r),d=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(we.a)(regeneratorRuntime.mark((function n(f){var l,h,x,k,T,v,data,S,O;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=f.retryAttempt,h=void 0===l?1:l,h++,n.prev=2,x=c.metamask.gasPrice.fast,k=c.metamask.ethAccount,n.next=7,o.bulksenderInstance();case 7:return T=n.sent,v=T._address,data=T.methods.initialize("0x3de332e44a0bbff025838c187873d77f92caf5e9").encodeABI(),S={method:"eth_sendTransaction",params:[{from:k,to:v,gas:Object(Ee.numberToHex)(3e6),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(x.toString(),"gwei")),value:Object(Ee.toHex)(0),data:data}],from:k},n.next=14,m("metamask/sendAsync",S,{root:!0});case 14:O=n.sent,e(O),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(2),h>=d||4001==n.t0.code?t(n.t0):r({retryAttempt:h});case 21:case"end":return n.stop()}}),n,null,[[2,18]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return J.apply(this,arguments)}),_addVIPs:(Y=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,Object(je.a)(r),d=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(we.a)(regeneratorRuntime.mark((function n(f){var l,h,x,k,T,v,S,data,O,A;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=f.retryAttempt,h=void 0===l?1:l,h++,n.prev=2,x=c.metamask.gasPrice.fast,k=c.metamask.ethAccount,n.next=7,o.bulksenderInstance();case 7:return T=n.sent,v=T._address,S=["0x35Ab957186d120F10ac5aa0c6410004B10c9F21a"],data=T.methods.addToVIPList(S).encodeABI(),O={method:"eth_sendTransaction",params:[{from:k,to:v,gas:Object(Ee.numberToHex)(3e6),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(x.toString(),"gwei")),value:Object(Ee.toHex)(0),data:data}],from:k},n.next=14,m("metamask/sendAsync",O,{root:!0});case 14:A=n.sent,e(A),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(2),h>=d||4001==n.t0.code?t(n.t0):r({retryAttempt:h});case 21:case"end":return n.stop()}}),n,null,[[2,18]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return Y.apply(this,arguments)}),_sendToken:(M=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T,v,S,O,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,d=t.commit,r.uniqueId,f=r.tokenAddress,l=r.estimateGas,h=void 0===l?0:l,x=r.decimals,k=r.addresses,T=r.amounts,v=r.nonce,S=void 0===v?0:v,O=n.checkSimpleTimes,A=function(time){return new Promise((function(e){return setTimeout(e,time)}))},e.abrupt("return",new Promise((function(e,t){var r=function(){var l=Object(we.a)(regeneratorRuntime.mark((function l(v){var j,w,y,E,R,_,I,F,P,data,B,G,H,D,C,L,U,N,K;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return j=v.retryAttempt,w=void 0===j?1:j,w++,l.prev=2,l.next=5,A(500);case 5:return y=o.metamask,E=y.ethAccount,R=y.importAccount,console.info(R),_=Object(Ie.a)("0"),T.forEach((function(e){var t=Object(Ie.a)(e).times(Object(Ie.a)(10).pow(parseInt(x)));_=_.plus(t)})),I=_.toString(10),F=k[0],l.next=13,c["token/tokenInstance"]();case 13:if(P=l.sent,data=P.methods.transfer(F,I).encodeABI(),null==R){l.next=38;break}return l.next=18,m("getChainId");case 18:return B=l.sent,G=R.privateKey.toString("hex"),H=new Ge.Wallet(G),D={nonce:Object(Ee.numberToHex)(S),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(n.gasPrice.toString(),"gwei")),gasLimit:Object(Ee.numberToHex)(h+n.commonExtraGas),to:f,value:Object(Ee.toHex)(0),data:data,chainId:B},C={params:[D]},l.next=25,m("_formatEIP1559Transaction",{callParams:C});case 25:return C=l.sent,D=C.params[0],l.next=29,H.signTransaction(D);case 29:return L=l.sent,console.log("Signed Transaction:",L),C={method:"eth_sendRawTransaction",params:[L]},l.next=34,m("metamask/sendAsync",C,{root:!0});case 34:U=l.sent,e(U),l.next=48;break;case 38:return N={method:"eth_sendTransaction",params:[{from:E,to:f,gas:Object(Ee.numberToHex)(h+n.commonExtraGas),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(n.gasPrice.toString(),"gwei")),value:Object(Ee.toHex)(0),data:data}],from:E},l.next=41,m("_formatEIP1559Transaction",{callParams:N});case 41:return N=l.sent,o.metamask.supportEIP1559&&n.walletSupportEIP1559&&(N.params[0].type="0x2"),l.next=46,m("metamask/sendAsync",N,{root:!0});case 46:K=l.sent,e(K);case 48:l.next=61;break;case 50:if(l.prev=50,l.t0=l.catch(2),console.info(l.t0),!(w>=O||4001==l.t0.code)){l.next=58;break}d("ADD_FAILED_TXS",""),4001==l.t0.code?e(n.userDeniedTransactionMessage):t(l.t0),l.next=61;break;case 58:return l.next=60,m("checkEIP1559Error",{e:l.t0});case 60:r({retryAttempt:w});case 61:case"end":return l.stop()}}),l,null,[[2,50]])})));return function(e){return l.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return M.apply(this,arguments)}),_bulksendToken:(z=Object(we.a)(regeneratorRuntime.mark((function t(r,n){var o,c,m,d,f,l,h,x,k,T,v,S,O,A,j,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.state,c=r.getters,m=r.rootState,r.rootGetters,d=r.dispatch,f=r.commit,l=n.uniqueId,h=n.tokenAddress,x=n.estimateGas,k=void 0===x?0:x,T=n.decimals,v=n.addresses,S=n.amounts,O=n.nonce,A=void 0===O?0:O,j=o.checkSimpleTimes,o.usedBurnerKey&&(j*=1e4),w=function(time){return new Promise((function(e){return setTimeout(e,time)}))},t.abrupt("return",new Promise((function(t,r){var n=function(){var x=Object(we.a)(regeneratorRuntime.mark((function x(O){var y,E,R,_,I,F,P,address,B,G,H,D,C,data,L,U,N,K,V,s,X,W,z,M,Y,J,Z,Q,$,ee;return regeneratorRuntime.wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return y=O.retryAttempt,E=void 0===y?1:y,E++,x.prev=2,R=m.metamask,_=R.ethAccount,R.networkBaseFee,x.next=6,c.bulksenderInstance();case 6:return I=x.sent,F=I._address,P=Object(Ee.asciiToHex)(l),address=o.referralAddress,x.next=12,d("common/checkAddressIsValid",{address:address},{root:!0});case 12:if(B=x.sent,G=Object(Ie.a)("0"),H=[],S.forEach((function(e){var t=Object(Ie.a)(e).times(Object(Ie.a)(10).pow(parseInt(T)));G=G.plus(t),H.push(t.toString(10))})),D=G.toString(10),H.unshift(D),(C=[].concat(v)).unshift(F),data="0x",!o.usedBurnerKey){x.next=44;break}return L=o.burnerKey,U=o.burner,N=o.burnerSignature,K=N.v,V=N.r,s=N.s,o.simple&&(B=!1),data=B?I.methods.bulksendTokenForBurners(h,C,H,P,o.simple,U,K,V,s,o.referralAddress).encodeABI():I.methods.bulksendTokenForBurners(h,C,H,P,o.simple,U,K,V,s).encodeABI(),x.next=30,d("getChainId");case 30:return X=x.sent,W=e.from(L.privateKey.replace("0x",""),"hex"),z={nonce:Object(Ee.numberToHex)(A),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(o.gasPrice.toString(),"gwei")),gasLimit:Object(Ee.numberToHex)(k+o.commonExtraGas+o.delegaterExtraGas),to:F,value:Object(Ee.toHex)(c.txFee),data:data,chainId:X},(M=new Pe(z)).sign(W),Y=M.serialize(),J="0x"+Y.toString("hex"),Z={method:"eth_sendRawTransaction",params:[J]},x.next=40,d("metamask/sendAsync",Z,{root:!0});case 40:Q=x.sent,t(Q),x.next=66;break;case 44:if(!o.simple){x.next=53;break}if(data=(B=!1)?I.methods.bulksendTokenSimple(h,C,H,P,o.referralAddress).encodeABI():I.methods.bulksendTokenSimple(h,C,H,P).encodeABI(),0!=k){x.next=51;break}return x.next=50,I.methods.bulksendTokenSimple(h,C,H,P).estimateGas({from:_,value:Object(Ee.toHex)(c.txFee)});case 50:k=x.sent;case 51:x.next=58;break;case 53:if(data=B?I.methods.bulksendToken(h,C,H,P,o.referralAddress).encodeABI():I.methods.bulksendToken(h,C,H,P).encodeABI(),0!=k){x.next=58;break}return x.next=57,I.methods.bulksendToken(h,C,H,P).estimateGas({from:_,value:Object(Ee.toHex)(c.txFee)});case 57:k=x.sent;case 58:return $={method:"eth_sendTransaction",params:[{from:_,to:F,gas:Object(Ee.numberToHex)(k+o.commonExtraGas),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(o.gasPrice.toString(),"gwei")),value:Object(Ee.toHex)(c.txFee),data:data}],from:_},x.next=61,d("_formatEIP1559Transaction",{callParams:$});case 61:return $=x.sent,x.next=64,d("metamask/sendAsync",$,{root:!0});case 64:ee=x.sent,t(ee);case 66:console.log("bulksend tx",k),x.next=83;break;case 69:if(x.prev=69,x.t0=x.catch(2),console.info(x.t0),!(E>=j||4001==x.t0.code)){x.next=77;break}f("ADD_FAILED_TXS",""),4001==x.t0.code?t(o.userDeniedTransactionMessage):r(x.t0),x.next=83;break;case 77:if(!o.usedBurnerKey){x.next=80;break}return x.next=80,w(300);case 80:return x.next=82,d("checkEIP1559Error",{e:x.t0});case 82:n({retryAttempt:E});case 83:case"end":return x.stop()}}),x,null,[[2,69]])})));return function(e){return x.apply(this,arguments)}}();n({})})));case 6:case"end":return t.stop()}}),t)}))),function(e,t){return z.apply(this,arguments)}),_formatEIP1559Transaction:(W=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,t.rootGetters,t.dispatch,t.commit,c=r.callParams,e.prev=2,m=o.metamask,d=m.supportEIP1559,f=m.networkBaseFee,d&&n.walletSupportEIP1559&&(l=c.params[0],(h=l.gasPrice)&&(h=Object(Ee.hexToNumberString)(h),h=Object(Ee.fromWei)(h,"gwei")),delete l.gasPrice,x=h,(k=Object(Ie.a)(x).minus(Object(Ie.a)(f)).toNumber())<1&&(k=1),k>10&&(k=10),l.maxFeePerGas=Object(Ee.toHex)(Object(Ee.toWei)(x.toString(),"gwei")),l.maxPriorityFeePerGas=Object(Ee.toHex)(Object(Ee.toWei)(k.toString(),"gwei")),l.type=2,c.params=[l]),e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(2),console.info(e.t0);case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,null,[[2,8]])}))),function(e,t){return W.apply(this,arguments)}),checkEIP1559Error:(X=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,t.getters,t.rootState,t.rootGetters,t.dispatch,n=t.commit,o=r.e,e.prev=2,!o.message||!o.message.includes("not support EIP-1559")){e.next=6;break}return n("SET_WALLET_SUPPORT_EIP1559",!1),e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(2),console.info(e.t0);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e,t){return X.apply(this,arguments)}),_bulksendTokenForNFT:(V=Object(we.a)(regeneratorRuntime.mark((function t(r,n){var o,c,m,d,f,l,h,x,k,T,v,S,O,A,j,w,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.state,c=r.getters,m=r.rootState,r.rootGetters,d=r.dispatch,f=r.commit,l=n.uniqueId,h=n.tokenAddress,x=n.estimateGas,k=void 0===x?0:x,T=n.decimals,v=n.addresses,S=n.amounts,O=n.tokenIds,A=n.nonce,j=void 0===A?0:A,w=o.checkSimpleTimes,o.usedBurnerKey&&(w*=1e4),y=function(time){return new Promise((function(e){return setTimeout(e,time)}))},t.abrupt("return",new Promise((function(t,r){var n=function(){var x=Object(we.a)(regeneratorRuntime.mark((function x(A){var E,R,_,I,F,P,B,address,G,H,D,C,L,U,data,N,K,V,X,W,s,z,M,Y,J,Z,Q,$,ee,te,re;return regeneratorRuntime.wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return E=A.retryAttempt,R=void 0===E?1:E,R++,x.prev=2,_=m.metamask.ethAccount,x.next=6,c.bulksenderInstance();case 6:return I=x.sent,F=I._address,P=Object(Ee.asciiToHex)(l),x.next=11,d("getNFTActionType");case 11:return B=x.sent,address=o.referralAddress,x.next=15,d("common/checkAddressIsValid",{address:address},{root:!0});case 15:if(x.sent,G=Object(Ie.a)("0"),H=[],D=[],S.forEach((function(e){var t=Object(Ie.a)(e).times(Object(Ie.a)(10).pow(parseInt(T)));G=G.plus(t),H.push(t.toString(10))})),O.forEach((function(e){D.push(Object(Ie.a)(e).toString(10))})),C=G.toString(10),L=Object(Ie.a)(O.length).toString(10),D.unshift(L),H.unshift(C),(U=[].concat(v)).unshift(F),data="0x",!o.usedBurnerKey){x.next=51;break}return N=o.burnerKey,K=o.burner,V=o.burnerSignature,X=V.v,W=V.r,s=V.s,data=I.methods.bulksendNFTTokenForBurners(h,U,D,H,B,P,o.referralAddress,K,X,W,s).encodeABI(),x.next=37,d("getChainId");case 37:return z=x.sent,M=e.from(N.privateKey.replace("0x",""),"hex"),Y={nonce:Object(Ee.numberToHex)(j),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(o.gasPrice.toString(),"gwei")),gasLimit:Object(Ee.numberToHex)(k+o.commonExtraGas+o.delegaterExtraGas),to:F,value:Object(Ee.toHex)(c.txFee),data:data,chainId:z},(J=new Pe(Y)).sign(M),Z=J.serialize(),Q="0x"+Z.toString("hex"),$={method:"eth_sendRawTransaction",params:[Q]},x.next=47,d("metamask/sendAsync",$,{root:!0});case 47:ee=x.sent,t(ee),x.next=64;break;case 51:if(data=I.methods.bulksendNFTToken(h,U,D,H,B,P,o.referralAddress).encodeABI(),0!=k){x.next=56;break}return x.next=55,I.methods.bulksendNFTToken(h,U,D,H,B,P,o.referralAddress).estimateGas({from:_,value:Object(Ee.toHex)(c.txFee)});case 55:k=x.sent;case 56:return te={method:"eth_sendTransaction",params:[{from:_,to:F,gas:Object(Ee.numberToHex)(k+o.commonExtraGas),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(o.gasPrice.toString(),"gwei")),value:Object(Ee.toHex)(c.txFee),data:data}],from:_},x.next=59,d("_formatEIP1559Transaction",{callParams:te});case 59:return te=x.sent,x.next=62,d("metamask/sendAsync",te,{root:!0});case 62:re=x.sent,t(re);case 64:console.log("bulksend tx",k),x.next=81;break;case 67:if(x.prev=67,x.t0=x.catch(2),console.info(x.t0),!(R>=w||4001==x.t0.code)){x.next=75;break}f("ADD_FAILED_TXS",""),4001==x.t0.code?t(o.userDeniedTransactionMessage):r(x.t0),x.next=81;break;case 75:if(!o.usedBurnerKey){x.next=78;break}return x.next=78,y(300);case 78:return x.next=80,d("checkEIP1559Error",{e:x.t0});case 80:n({retryAttempt:R});case 81:case"end":return x.stop()}}),x,null,[[2,67]])})));return function(e){return x.apply(this,arguments)}}();n({})})));case 6:case"end":return t.stop()}}),t)}))),function(e,t){return V.apply(this,arguments)}),bulksendToken:(K=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T,v,S,O,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,t.getters,t.rootState,n=t.rootGetters,o=t.dispatch,c=t.commit,m=r.uniqueId,d=r.estimateGas,f=void 0===d?0:d,l=r.tokenAddress,h=r.decimals,x=r.addresses,k=r.amounts,T=r.tokenIds,v=r.nonce,S=void 0===v?0:v,O=n["token/isNFTToken"],A=void 0,!O){e.next=10;break}return e.next=7,o("_bulksendTokenForNFT",{uniqueId:m,tokenAddress:l,estimateGas:f,decimals:h,addresses:x,amounts:k,tokenIds:T,nonce:S});case 7:A=e.sent,e.next=13;break;case 10:return e.next=12,o("_sendToken",{uniqueId:m,tokenAddress:l,estimateGas:f,decimals:h,addresses:x,amounts:k,nonce:S});case 12:A=e.sent;case 13:if(null==A||null==A){e.next=22;break}return console.info("txHash",A),c("ADD_TX",A),o("common/updateBulkSentStatus",{status:0,txHash:A,uniqueId:m},{root:!0}),o("checkBulksenderTransactionStatus",{uniqueId:m,txHash:A}),e.abrupt("return",!0);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e)}))),function(e,t){return K.apply(this,arguments)}),bulksendEther:(N=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootState,t.rootGetters,n=t.dispatch,o=t.commit,c=r.uniqueId,m=r.estimateGas,d=void 0===m?0:m,f=r.tokenAddress,l=r.decimals,h=r.addresses,x=r.amounts,k=r.nonce,e.next=4,n("_sendEther",{uniqueId:c,tokenAddress:f,estimateGas:d,decimals:l,addresses:h,amounts:x,nonce:k});case 4:if("User denied transaction signature."==(T=e.sent)){e.next=14;break}return console.info("txHash",T),o("ADD_TX",T),n("common/updateBulkSentStatus",{status:0,txHash:T,uniqueId:c},{root:!0}),n("checkBulksenderTransactionStatus",{uniqueId:c,txHash:T}),e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)}))),function(e,t){return N.apply(this,arguments)}),_bulksendEther:(U=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T,v,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.uniqueId,r.tokenAddress,h=r.estimateGas,x=void 0===h?0:h,k=r.decimals,T=r.addresses,v=r.amounts,S=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var h=Object(we.a)(regeneratorRuntime.mark((function h(O){var A,j,w,y,E,R,_,I,F,P,B,data,G,H,D;return regeneratorRuntime.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return A=O.retryAttempt,j=void 0===A?1:A,j++,h.prev=2,w=c.metamask.ethAccount,h.next=6,o.bulksenderInstance();case 6:if(y=h.sent,E=y._address,R=Object(Ee.asciiToHex)(l),_=Object(Ie.a)("0"),I=[],v.forEach((function(e){var t=Object(Ie.a)(e).times(Object(Ie.a)(10).pow(parseInt(k)));_=_.plus(t),I.push(t.toString(10))})),F=_.toString(10),I.unshift(F),(P=[].concat(T)).unshift(E),B=_.plus(Object(Ie.a)(o.txFee)).toString(10),data=y.methods.bulksendEther(P,I,R).encodeABI(),0!=(x=0)){h.next=23;break}return h.next=22,y.methods.bulksendEther(P,I,R).estimateGas({from:w,value:Object(Ee.toHex)(B)});case 22:x=h.sent;case 23:return(G=m["metamask/networkConfig"].ethTransferExtraGasRatio)&&G>0&&(x=parseInt(x*G)),console.log("bulksend tx",x),H={method:"eth_sendTransaction",params:[{from:w,to:E,gas:Object(Ee.numberToHex)(x+n.commonExtraGas),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(n.gasPrice.toString(),"gwei")),value:Object(Ee.toHex)(B),data:data}],from:w},h.next=29,d("_formatEIP1559Transaction",{callParams:H});case 29:return H=h.sent,h.next=32,d("metamask/sendAsync",H,{root:!0});case 32:D=h.sent,e(D),h.next=47;break;case 36:if(h.prev=36,h.t0=h.catch(2),console.info(h.t0),!(j>=S||4001==h.t0.code)){h.next=44;break}f("ADD_FAILED_TXS",""),4001==h.t0.code?e(n.userDeniedTransactionMessage):t(h.t0),h.next=47;break;case 44:return h.next=46,d("checkEIP1559Error",{e:h.t0});case 46:r({retryAttempt:j});case 47:case"end":return h.stop()}}),h,null,[[2,36]])})));return function(e){return h.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return U.apply(this,arguments)}),_sendEther:(L=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,m=t.commit,r.uniqueId,r.tokenAddress,d=r.estimateGas,f=void 0===d?0:d,l=r.decimals,h=r.addresses,x=r.amounts,k=r.nonce,T=n.checkSimpleTimes,v=function(time){return new Promise((function(e){return setTimeout(e,time)}))},e.abrupt("return",new Promise((function(e,t){var r=function(){var d=Object(we.a)(regeneratorRuntime.mark((function d(S){var O,A,j,w,y,E,R,_,I,F,P,B,G,H,D,C,L;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return O=S.retryAttempt,A=void 0===O?1:O,A++,d.prev=2,d.next=5,v(500);case 5:if(j=o.metamask,w=j.ethAccount,y=j.importAccount,E=Object(Ie.a)("0"),x.forEach((function(e){var t=Object(Ie.a)(e).times(Object(Ie.a)(10).pow(parseInt(l)));E=E.plus(t)})),R=E.toString(10),_=h[0],null==y){d.next=33;break}return d.next=13,c("getChainId");case 13:return I=d.sent,F=y.privateKey.toString("hex"),P=new Ge.Wallet(F),B={nonce:Object(Ee.numberToHex)(k),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(n.gasPrice.toString(),"gwei")),gasLimit:Object(Ee.numberToHex)(f+n.commonExtraGas),to:_,value:Object(Ee.toHex)(R),chainId:I},G={params:[B]},d.next=20,c("_formatEIP1559Transaction",{callParams:G});case 20:return G=d.sent,B=G.params[0],d.next=24,P.signTransaction(B);case 24:return H=d.sent,console.log("Signed Transaction:",H),G={method:"eth_sendRawTransaction",params:[H]},d.next=29,c("metamask/sendAsync",G,{root:!0});case 29:D=d.sent,e(D),d.next=43;break;case 33:return C={method:"eth_sendTransaction",params:[{from:w,to:_,gas:Object(Ee.numberToHex)(f+n.commonExtraGas),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(n.gasPrice.toString(),"gwei")),value:Object(Ee.toHex)(R)}],from:w},d.next=36,c("_formatEIP1559Transaction",{callParams:C});case 36:return C=d.sent,o.metamask.supportEIP1559&&n.walletSupportEIP1559&&(C.params[0].type="0x2"),d.next=41,c("metamask/sendAsync",C,{root:!0});case 41:L=d.sent,e(L);case 43:d.next=56;break;case 45:if(d.prev=45,d.t0=d.catch(2),console.info(d.t0),!(A>=T||4001==d.t0.code)){d.next=53;break}m("ADD_FAILED_TXS",""),4001==d.t0.code?e(n.userDeniedTransactionMessage):t(d.t0),d.next=56;break;case 53:return d.next=55,c("checkEIP1559Error",{e:d.t0});case 55:r({retryAttempt:A});case 56:case"end":return d.stop()}}),d,null,[[2,45]])})));return function(e){return d.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return L.apply(this,arguments)}),estimateGasForPerTransferUsedBulksender:(C=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,t.getters,t.rootState,t.rootGetters,t.dispatch,t.commit,n=r.tokenAddress,r.testAddresses,r.testBalances,r.testTokenIds,"0x0000000000000000000000000000000000000000"!=n){e.next=6;break}return e.abrupt("return",21e3);case 6:return e.abrupt("return",15e4);case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return C.apply(this,arguments)}),estimateGasForPerTransferUsedBulksenderForSingle:(D=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T,v,S,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,t.rootState,o=t.rootGetters,c=t.dispatch,t.commit,m=r.tokenAddress,d=r.testAddresses,f=r.testBalances,l=r.testTokenIds,h=r.decimals,e.prev=2,x=d,k=f,"0x0000000000000000000000000000000000000000"!=m){e.next=10;break}return e.next=8,c("estimateGasForPerEtherTransferForSingle",{tokenAddress:m,addresses:x,balances:k,decimals:h});case 8:return T=e.sent,e.abrupt("return",T+n.etherDelegateCallExtraGas);case 10:if(!o["token/isNFTToken"]){e.next=17;break}return v=l,e.next=15,c("estimateGasForPerNFTTokenTransferForSingle",{tokenAddress:m,addresses:x,balances:k,tokenIds:v,decimals:h});case 15:return S=e.sent,e.abrupt("return",S);case 17:return e.next=19,c("estimateGasForPerTokenTransferForSingle",{tokenAddress:m,addresses:x,balances:k,decimals:h});case 19:return O=e.sent,e.abrupt("return",O);case 23:if(e.prev=23,e.t0=e.catch(2),console.info("estimateGasForPerTransferUsedBulksender",e.t0),"0x0000000000000000000000000000000000000000"!=m){e.next=30;break}return e.abrupt("return",5e4);case 30:return e.abrupt("return",15e4);case 31:return e.abrupt("return",-1);case 32:case"end":return e.stop()}}),e,null,[[2,23]])}))),function(e,t){return D.apply(this,arguments)}),validateBatchAgain:(H=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,t.getters,t.rootState,n=t.rootGetters,o=t.dispatch,t.commit,c=r.tokenAddress,m=r.addresses,d=r.amounts,r.tokenIds,e.prev=2,f=n["token/isNFTToken"],"0x0000000000000000000000000000000000000000"==c||f){e.next=8;break}return l=d,e.next=8,o("estimateGasForBatchTokenTransfer",{tokenAddress:c,addresses:m,balances:l});case 8:return e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[2,11]])}))),function(e,t){return H.apply(this,arguments)}),estimateGasForBatchTransfer:(G=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state,t.getters,t.rootState,t.rootGetters,t.dispatch,t.commit,n=r.tokenAddress,r.addresses,r.amounts,r.tokenIds,"0x0000000000000000000000000000000000000000"!=n){e.next=6;break}return e.abrupt("return",21e3);case 6:return e.abrupt("return",15e4);case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e)}))),function(e,t){return G.apply(this,arguments)}),estimateBulksendSize:(B=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,t.rootState,t.rootGetters,o=t.dispatch,t.commit,c=r.tokenAddress,m=r.testAddresses,d=r.testBalances,e.prev=2,"0x0000000000000000000000000000000000000000"!=c){e.next=5;break}return e.abrupt("return",n.etherBatchSize);case 5:return f=m,l=d,e.next=9,o("estimateGasForPerTransfer",{tokenAddress:c,addresses:f,balances:l});case 9:return h=e.sent,x=parseInt(n.maxGasUsed/parseFloat(h)),n.simple,e.abrupt("return",x);case 15:return e.prev=15,e.t0=e.catch(2),console.info(e.t0),e.abrupt("return",0);case 19:case"end":return e.stop()}}),e,null,[[2,15]])}))),function(e,t){return B.apply(this,arguments)}),estimateGasForPerTokenTransferV2:(P=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T,v,S,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,x=r.balances,(k=m["metamask/networkConfig"]).newEstimatedMethod,null==(T=k.blockConfig)&&(T=n.defaultBlockConfig),v=n.checkSimpleTimes+2,(S=m["metamask/networkConfig"]).specialTokenList,O=S.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(we.a)(regeneratorRuntime.mark((function m(k){var S,A,j,w,y,E,R,_,I,F,P,B,G,H,D,C,L,U,N,K,V,X,W,z,M,Y,J,Z,Q,$,ee,te,re,ne;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return S=k.retryAttempt,A=void 0===S?0:S,A++,m.prev=2,j=n.simple,w=c.metamask.ethAccount,(y=c.token).allowance,E=y.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return R=m.sent,_=R._address,I=E.decimals,F=Object(Ie.a)("0"),B=[],(P=h).forEach((function(e,t){var r=x[t],n=Object(Ie.a)(r).times(Object(Ie.a)(10).pow(I));B.push(n.toString(10)),F=F.plus(n)})),G=F.toString(10),m.next=18,d("createNewUniqueId");case 18:return H=m.sent,D=[_],C=[G],(O.includes(w)||O.includes(l))&&f("SET_SIMPLE",j=!0),L=0,U="0x",U=j?R.methods.bulksendTokenSimple(l,D,C,H).encodeABI():R.methods.bulksendToken(l,D,C,H).encodeABI(),N={method:"eth_estimateGas",params:[{from:w,to:_,data:U,value:Object(Ee.toHex)(Object(Ie.a)(o.txFee).toString(10)),gasLimit:Object(Ee.toHex)(T.maxGasUsed)}],from:w},m.next=28,d("metamask/sendAsync",N,{root:!0});case 28:return L=m.sent,L=Object(Ee.hexToNumber)(L),K=Object(Ee.hexToBytes)(U).length,V=R.methods.estimatedERC20TransferGasCost(l,[],[],G,j).encodeABI(),X={method:"eth_call",params:[{from:w,to:_,data:V,value:Object(Ee.toHex)(Object(Ie.a)(o.txFee).toString(10)),gasLimit:Object(Ee.toHex)(T.maxGasUsed)}],from:w},m.next=35,d("metamask/sendAsync",X,{root:!0});case 35:return W=m.sent,z=Be.decodeParameters([{name:"gasLeftForBase",type:"uint256"}],W),M=z.gasLeftForBase,console.info("gasLeftForBase",M),W=T.maxGasUsed-M,console.info("gasUsedForBase",W),Y=0,J="0x",D=D.concat(P),C=C.concat(B),J=R.methods.estimatedERC20TransferGasCost(l,P,B,G,j).encodeABI(),Z={method:"eth_call",params:[{from:w,to:_,data:J,value:Object(Ee.toHex)(Object(Ie.a)(o.txFee).toString(10)),gas:Object(Ee.toHex)(T.maxGasUsed)}],from:w},m.next=48,d("metamask/sendAsync",Z,{root:!0});case 48:if(Y=m.sent,Q=Be.decodeParameters([{name:"gasLeft",type:"uint256"}],Y),$=Q.gasLeft,console.info($),Y=T.maxGasUsed-$,console.info(Y),0!=L&&0!=Y){m.next=55;break}throw Error("EstimateGasForPerTransfer failed");case 55:try{h=new Set(h),h=Array.from(h)}catch(e){}ee=Object(Ee.hexToBytes)(J).length,te=parseInt((ee-K)/parseFloat(h.length)),console.info("baseGas",L),re=parseInt((Y-W)/parseFloat(h.length)),(ne=parseInt(n.maxGasUsed/parseFloat(re)))*te>1024*n.maxBlockByteSizeKB&&(ne=parseInt(1024*n.maxBlockByteSizeKB/parseFloat(te)),re=parseInt(n.maxGasUsed/parseFloat(ne))),f("SET_BASE_CALLING_GAS",L),e(re),m.next=72;break;case 68:m.prev=68,m.t0=m.catch(2),console.info("estimateGasForPerTokenTransfer",m.t0),A>=v?t(m.t0):r({retryAttempt:A});case 72:case"end":return m.stop()}}),m,null,[[2,68]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return P.apply(this,arguments)}),estimateGasForPerTokenTransfer:(F=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,x=r.balances,k=n.checkSimpleTimes+2,(T=m["metamask/networkConfig"]).specialTokenList,v=T.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(we.a)(regeneratorRuntime.mark((function m(T){var S,O,A,j,w,y,E,R,_,I,F,P,B,G,H,D,C,L,U,N,K,V,X,W,z,M,Y;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return S=T.retryAttempt,O=void 0===S?0:S,O++,m.prev=2,A=n.simple,j=c.metamask.ethAccount,(w=c.token).allowance,y=w.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return E=m.sent,R=E._address,_=y.decimals,I=Object(Ie.a)("0"),P=[],(F=h).forEach((function(e,t){var r=x[t],n=Object(Ie.a)(r).times(Object(Ie.a)(10).pow(_));P.push(n.toString(10)),I=I.plus(n)})),B=I.toString(10),m.next=18,d("createNewUniqueId");case 18:return G=m.sent,H=[R],D=[B],(v.includes(j)||v.includes(l))&&f("SET_SIMPLE",A=!0),C=0,L="0x",L=A?E.methods.bulksendTokenSimple(l,H,D,G).encodeABI():E.methods.bulksendToken(l,H,D,G).encodeABI(),U={method:"eth_estimateGas",params:[{from:j,to:R,data:L,value:Object(Ee.toHex)(Object(Ie.a)(o.txFee).toString(10))}],from:j},m.next=28,d("metamask/sendAsync",U,{root:!0});case 28:return C=m.sent,C=Object(Ee.hexToNumber)(C),N=Object(Ee.hexToBytes)(L).length,K=0,V="0x",H=H.concat(F),D=D.concat(P),V=A?E.methods.bulksendTokenSimple(l,H,D,G).encodeABI():E.methods.bulksendToken(l,H,D,G).encodeABI(),X={method:"eth_estimateGas",params:[{from:j,to:R,data:V,value:Object(Ee.toHex)(Object(Ie.a)(o.txFee).toString(10))}],from:j},m.next=39,d("metamask/sendAsync",X,{root:!0});case 39:if(K=m.sent,K=Object(Ee.hexToNumber)(K),0!=C&&0!=K){m.next=43;break}throw Error("EstimateGasForPerTransfer failed");case 43:try{h=new Set(h),h=Array.from(h)}catch(e){}W=Object(Ee.hexToBytes)(V).length,z=parseInt((W-N)/parseFloat(h.length)),M=parseInt((K-C)/parseFloat(h.length)),(Y=parseInt(n.maxGasUsed/parseFloat(M)))*z>1024*n.maxBlockByteSizeKB&&(Y=parseInt(1024*n.maxBlockByteSizeKB/parseFloat(z)),M=parseInt(n.maxGasUsed/parseFloat(Y))),f("SET_BASE_CALLING_GAS",C),e(M),m.next=59;break;case 55:m.prev=55,m.t0=m.catch(2),console.info("estimateGasForPerTokenTransfer",m.t0),O>=k?t(m.t0):r({retryAttempt:O});case 59:case"end":return m.stop()}}),m,null,[[2,55]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return F.apply(this,arguments)}),estimateGasForPerTokenTransferForSingle:(I=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,c=t.rootGetters,m=t.dispatch,t.commit,d=r.tokenAddress,f=r.addresses,l=r.balances,h=r.decimals,x=n.checkSimpleTimes+2,e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(we.a)(regeneratorRuntime.mark((function n(k){var T,v,S,O,A,j,w,data,y,E;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return T=k.retryAttempt,v=void 0===T?0:T,v++,n.prev=2,S=o.metamask.ethAccount,O=Object(Ie.a)("0"),l.forEach((function(e){var t=Object(Ie.a)(e).times(Object(Ie.a)(10).pow(parseInt(h)));O=O.plus(t)})),A=O.toString(10),j=f[0],n.next=10,c["token/tokenInstance"](d);case 10:return w=n.sent,data=w.methods.transfer(j,A).encodeABI(),y={method:"eth_estimateGas",params:[{from:S,to:d,data:data,value:Object(Ee.toHex)(0)}],from:S},n.next=15,m("metamask/sendAsync",y,{root:!0});case 15:E=n.sent,E=Object(Ee.hexToNumber)(E),e(E),n.next=24;break;case 20:n.prev=20,n.t0=n.catch(2),console.info("estimateGasForPerTokenTransfer",n.t0),v>=x?t(n.t0):r({retryAttempt:v});case 24:case"end":return n.stop()}}),n,null,[[2,20]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return I.apply(this,arguments)}),estimateGasForBatchTokenTransfer:(_=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,x=r.balances,k=n.checkSimpleTimes+2,(T=m["metamask/networkConfig"]).specialTokenList,v=T.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(we.a)(regeneratorRuntime.mark((function m(T){var S,O,A,j,w,y,E,R,_,I,F,P,B,G,H,D,C,L,U;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return S=T.retryAttempt,O=void 0===S?0:S,O++,m.prev=2,A=n.simple,j=c.metamask.ethAccount,(w=c.token).allowance,y=w.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return E=m.sent,R=E._address,_=y.decimals,I=Object(Ie.a)("0"),P=[],(F=h).forEach((function(e,t){var r=x[t],n=Object(Ie.a)(r).times(Object(Ie.a)(10).pow(_));P.push(n.toString(10)),I=I.plus(n)})),B=I.toString(10),m.next=18,d("createNewUniqueId");case 18:return G=m.sent,H=[R],D=[B],(v.includes(j)||v.includes(l))&&f("SET_SIMPLE",A=!0),C=0,L="0x",H=H.concat(F),D=D.concat(P),L=A?E.methods.bulksendTokenSimple(l,H,D,G).encodeABI():E.methods.bulksendToken(l,H,D,G).encodeABI(),U={method:"eth_estimateGas",params:[{from:j,to:R,data:L,value:Object(Ee.toHex)(Object(Ie.a)(o.txFee).toString(10))}],from:j},m.next=30,d("metamask/sendAsync",U,{root:!0});case 30:C=m.sent,C=Object(Ee.hexToNumber)(C),e(C),m.next=39;break;case 35:m.prev=35,m.t0=m.catch(2),console.info("estimateGasForBatchTokenTransfer",m.t0),O>=k?t(m.t0):r({retryAttempt:O});case 39:case"end":return m.stop()}}),m,null,[[2,35]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return _.apply(this,arguments)}),estimateGasForPerNFTTokenTransfer:(R=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T,v,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,x=r.balances,k=r.tokenIds,T=r.decimals,v=n.checkSimpleTimes+2,(S=m["metamask/networkConfig"]).specialTokenList,S.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(we.a)(regeneratorRuntime.mark((function m(S){var O,A,j,w,y,E,R,_,I,F,P,B,G,H,D,C,L,U,N,K,V,X,W,z,M,Y,J,Z;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return O=S.retryAttempt,A=void 0===O?0:O,A++,m.prev=2,n.simple,j=c.metamask.ethAccount,(w=c.token).allowance,w.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return y=m.sent,E=y._address,R=Object(Ie.a)("0"),I=[],F=[],(_=h).forEach((function(e,t){var r=x[t],n=k[t],o=Object(Ie.a)(r).times(Object(Ie.a)(10).pow(T));I.push(o.toString(10)),R=R.plus(o),F.push(Object(Ie.a)(n).toString(10))})),P=R.toString(10),m.next=18,d("createNewUniqueId");case 18:return B=m.sent,m.next=21,d("getNFTActionType");case 21:return G=m.sent,H=Object(Ie.a)(k.length).toString(10),D=[E],C=[P],L=[H],U=0,N=y.methods.bulksendNFTToken(l,D,L,C,G,B,j).encodeABI(),K={method:"eth_estimateGas",params:[{from:j,to:E,data:N,value:Object(Ee.toHex)(Object(Ie.a)(o.txFee).toString(10))}],from:j},m.next=31,d("metamask/sendAsync",K,{root:!0});case 31:return U=m.sent,U=Object(Ee.hexToNumber)(U),V=Object(Ee.hexToBytes)(N).length,X=0,D=D.concat(_),C=C.concat(I),L=L.concat(F),W=y.methods.bulksendNFTToken(l,D,L,C,G,B,j).encodeABI(),z={method:"eth_estimateGas",params:[{from:j,to:E,data:W,value:Object(Ee.toHex)(Object(Ie.a)(o.txFee).toString(10))}],from:j},m.next=42,d("metamask/sendAsync",z,{root:!0});case 42:if(X=m.sent,X=Object(Ee.hexToNumber)(X),0!=U&&0!=X){m.next=46;break}throw Error("EstimateGasForPerTransfer failed");case 46:M=Object(Ee.hexToBytes)(W).length,Y=parseInt((M-V)/parseFloat(h.length)),J=parseInt((X-U)/parseFloat(h.length)),(Z=parseInt(n.maxGasUsed/parseFloat(J)))*Y>1024*n.maxBlockByteSizeKB&&(Z=parseInt(1024*n.maxBlockByteSizeKB/parseFloat(Y)),J=parseInt(n.maxGasUsed/parseFloat(Z))),f("SET_BASE_CALLING_GAS",U),e(J),m.next=61;break;case 57:m.prev=57,m.t0=m.catch(2),console.info("estimateGasForPerTokenTransfer",m.t0),A>=v?t(m.t0):r({retryAttempt:A});case 61:case"end":return m.stop()}}),m,null,[[2,57]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return R.apply(this,arguments)}),estimateGasForBatchNFTTokenTransfer:(E=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,m=t.rootGetters,d=t.dispatch,t.commit,f=r.tokenAddress,l=r.addresses,h=r.balances,x=r.tokenIds,k=n.checkSimpleTimes+2,(T=m["metamask/networkConfig"]).specialTokenList,T.whiteAccountList,e.abrupt("return",new Promise((function(e,t){var r=function(){var m=Object(we.a)(regeneratorRuntime.mark((function m(T){var v,S,O,A,j,w,y,E,R,_,I,F,P,B,G,H,D,C,L,U,N,K;return regeneratorRuntime.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return v=T.retryAttempt,S=void 0===v?0:v,S++,m.prev=2,n.simple,O=c.metamask.ethAccount,(A=c.token).allowance,j=A.tokenSelected,m.next=8,o.bulksenderInstance();case 8:return w=m.sent,y=w._address,E=j.decimals,R=Object(Ie.a)("0"),I=[],F=[],(_=l).forEach((function(e,t){var r=h[t],n=x[t],o=Object(Ie.a)(r).times(Object(Ie.a)(10).pow(E));I.push(o.toString(10)),R=R.plus(o),F.push(Object(Ie.a)(n).toString(10))})),P=R.toString(10),m.next=19,d("createNewUniqueId");case 19:return B=m.sent,m.next=22,d("getNFTActionType");case 22:return G=m.sent,H=Object(Ie.a)(x.length).toString(10),C=[P],L=[H],U=0,D=(D=[y]).concat(_),C=C.concat(I),L=L.concat(F),N=w.methods.bulksendNFTToken(f,D,L,C,G,B,O).encodeABI(),K={method:"eth_estimateGas",params:[{from:O,to:y,data:N,value:Object(Ee.toHex)(Object(Ie.a)(o.txFee).toString(10))}],from:O},m.next=35,d("metamask/sendAsync",K,{root:!0});case 35:U=m.sent,U=Object(Ee.hexToNumber)(U),e(U),m.next=44;break;case 40:m.prev=40,m.t0=m.catch(2),console.info("estimateGasForBatchTokenTransfer",m.t0),S>=k?t(m.t0):r({retryAttempt:S});case 44:case"end":return m.stop()}}),m,null,[[2,40]])})));return function(e){return m.apply(this,arguments)}}();r({})})));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return E.apply(this,arguments)}),estimateGasForPerEtherTransferForSingle:(y=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,t.getters,o=t.rootState,t.rootGetters,c=t.dispatch,t.commit,r.tokenAddress,m=r.addresses,d=r.balances,f=r.decimals,l=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(we.a)(regeneratorRuntime.mark((function n(h){var x,k,T,v,S,O,A,j;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x=h.retryAttempt,k=void 0===x?0:x,k++,n.prev=2,T=o.metamask.ethAccount,v=Object(Ie.a)("0"),d.forEach((function(e){var t=Object(Ie.a)(e).times(Object(Ie.a)(10).pow(parseInt(f)));v=v.plus(t)})),S=v.toString(10),O=m[0],A={method:"eth_estimateGas",params:[{from:T,to:O,value:Object(Ee.toHex)(S)}],from:T},n.next=11,c("metamask/sendAsync",A,{root:!0});case 11:j=n.sent,j=Object(Ee.hexToNumber)(j),console.info("costForPerTransfer",j),e(j),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(2),k>=l?t(n.t0):r({retryAttempt:k});case 20:case"end":return n.stop()}}),n,null,[[2,17]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return y.apply(this,arguments)}),estimateGasForPerEtherTransfer:(w=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,d=t.commit,r.tokenAddress,f=r.addresses,l=r.balances,h=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var x=Object(we.a)(regeneratorRuntime.mark((function x(k){var T,v,S,O,A,j,w,y,E,R,_,I,F,P,B,G,H,D,C,L,U,N,K,V,X,W,z;return regeneratorRuntime.wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return T=k.retryAttempt,v=void 0===T?0:T,v++,x.prev=2,S=c.metamask.ethAccount,(O=c.token).allowance,A=O.tokenSelected,x.next=7,o.bulksenderInstance();case 7:return j=x.sent,w=j._address,y=A.decimals,E=Object(Ie.a)("0"),_=[],(R=f).forEach((function(e,t){var r=l[t],n=Object(Ie.a)(r).times(Object(Ie.a)(10).pow(y));_.push(n.toString(10)),E=E.plus(n)})),I=E.toString(10),x.next=17,m("createNewUniqueId");case 17:return F=x.sent,P=[w],B=[I],G=E.plus(Object(Ie.a)(o.txFee)).toString(10),x.next=23,j.methods.bulksendEther(P,B,F).encodeABI();case 23:return H=x.sent,D={method:"eth_estimateGas",params:[{from:S,to:w,data:H,value:Object(Ee.toHex)(G)}],from:S},x.next=27,m("metamask/sendAsync",D,{root:!0});case 27:return C=x.sent,C=Object(Ee.hexToNumber)(C),L=Object(Ee.hexToBytes)(H).length,P=P.concat(R),B=B.concat(_),x.next=34,j.methods.bulksendEther(P,B,F).encodeABI();case 34:return U=x.sent,N={method:"eth_estimateGas",params:[{from:S,to:w,data:U,value:Object(Ee.toHex)(G)}],from:S},x.next=38,m("metamask/sendAsync",N,{root:!0});case 38:if(K=x.sent,K=Object(Ee.hexToNumber)(K),0!=C&&0!=K){x.next=42;break}throw Error("EstimateGasForPerETHTransfer failed");case 42:V=Object(Ee.hexToBytes)(U).length,X=parseInt((V-L)/parseFloat(f.length)),W=parseInt((K-C)/parseFloat(f.length)),(z=parseInt(n.maxGasUsed/parseFloat(W)))*X>1024*n.maxBlockByteSizeKB&&(z=parseInt(1024*n.maxBlockByteSizeKB/parseFloat(X)),W=parseInt(n.maxGasUsed/parseFloat(z))),d("SET_BASE_CALLING_GAS",C),e(W),x.next=56;break;case 53:x.prev=53,x.t0=x.catch(2),v>=h?t(x.t0):r({retryAttempt:v});case 56:case"end":return x.stop()}}),x,null,[[2,53]])})));return function(e){return x.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return w.apply(this,arguments)}),estimateGasForBatchEtherTransfer:(j=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootState,t.rootGetters,m=t.dispatch,t.commit,r.tokenAddress,d=r.addresses,f=r.balances,l=n.checkSimpleTimes,e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(we.a)(regeneratorRuntime.mark((function n(h){var x,k,T,v,S,O,A,j,w,y,E,R,_,I,F,P,B,G,H;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x=h.retryAttempt,k=void 0===x?0:x,k++,n.prev=2,T=c.metamask.ethAccount,(v=c.token).allowance,S=v.tokenSelected,n.next=7,o.bulksenderInstance();case 7:return O=n.sent,A=O._address,j=S.decimals,w=Object(Ie.a)("0"),E=[],(y=d).forEach((function(e,t){var r=f[t],n=Object(Ie.a)(r).times(Object(Ie.a)(10).pow(j));E.push(n.toString(10)),w=w.plus(n)})),R=w.toString(10),n.next=17,m("createNewUniqueId");case 17:return _=n.sent,I=[A],F=[R],P=w.plus(Object(Ie.a)(o.txFee)).toString(10),I=I.concat(y),F=F.concat(E),n.next=25,O.methods.bulksendEther(I,F,_).encodeABI();case 25:return B=n.sent,G={method:"eth_estimateGas",params:[{from:T,to:A,data:B,value:Object(Ee.toHex)(P)}],from:T},n.next=29,m("metamask/sendAsync",G,{root:!0});case 29:H=n.sent,H=Object(Ee.hexToNumber)(H),e(H),n.next=37;break;case 34:n.prev=34,n.t0=n.catch(2),k>=l?t(n.t0):r({retryAttempt:k});case 37:case"end":return n.stop()}}),n,null,[[2,34]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return j.apply(this,arguments)}),sendBulksenderByPrivateKey:(A=Object(we.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,t.getters,t.rootGetters,t.rootState,t.dispatch,t.commit;case 1:case"end":return e.stop()}}),e)}))),function(e){return A.apply(this,arguments)}),_sendTxFeeToDelegater:(O=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,n=t.rootGetters,o=t.rootState,c=t.dispatch,t.commit,m=r.checkSimpleTimes,d=o.bulksender.burnerKey,f=n["metamask/networkConfig"].L2Chain,e.abrupt("return",new Promise((function(e,t){var n=function(){var l=Object(we.a)(regeneratorRuntime.mark((function l(h){var x,k,T,v,S,O,A,j,w;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return x=h.retryAttempt,k=void 0===x?1:x,k++,l.prev=2,T=o.metamask.ethAccount,v=r.gasPrice,l.next=7,c("calDelegaterTotalFee");case 7:if(S=l.sent,O=21e3,!f){l.next=16;break}return A={method:"eth_estimateGas",params:[{from:T,to:d.address,value:Object(Ee.toHex)(S)}],from:T},l.next=13,c("metamask/sendAsync",A,{root:!0});case 13:O=l.sent,O=Object(Ee.hexToNumber)(O),console.info(O);case 16:return j={method:"eth_sendTransaction",params:[{from:T,to:d.address,gas:Object(Ee.numberToHex)(O),gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(v.toString(),"gwei")),value:Object(Ee.toHex)(S)}],from:T},l.next=19,c("metamask/sendAsync",j,{root:!0});case 19:w=l.sent,e(w),l.next=26;break;case 23:l.prev=23,l.t0=l.catch(2),k>=m||4001==l.t0.code?t(l.t0):n({retryAttempt:k});case 26:case"end":return l.stop()}}),l,null,[[2,23]])})));return function(e){return l.apply(this,arguments)}}();n({})})));case 5:case"end":return e.stop()}}),e)}))),function(e){return O.apply(this,arguments)}),calDelegaterTotalFee:(S=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,t.rootGetters,n=t.rootState,t.dispatch,t.commit,r.gasPrice,o=n.common.estimateETHCost,c=n.common.addressInfo,m=Object(Ie.a)(r.delegaterExtraGas).times(Object(Ie.a)(c.batches.length)).times(Object(Ie.a)(r.gasPrice)).times(Object(Ie.a)(10).pow(9)),d=Object(Ie.a)(o).times(Object(Ie.a)(10).pow(18)).plus(m).toString(10),e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)}))),function(e){return S.apply(this,arguments)}),checkDelegaterHasReceivedFee:(v=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,e.prev=1,o=r.burnerKey,c={method:"eth_getBalance",params:[o.address,"latest"]},e.next=6,n("metamask/sendAsync",c,{root:!0});case 6:return m=e.sent,m=Object(Ee.hexToNumberString)(m),e.next=10,n("calDelegaterTotalFee");case 10:return d=e.sent,e.abrupt("return",Object(Ie.a)(m).gte(Object(Ie.a)(d)));case 14:return e.prev=14,e.t0=e.catch(1),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[1,14]])}))),function(e){return v.apply(this,arguments)}),_sendRemainTxFeeBack:(T=Object(we.a)(regeneratorRuntime.mark((function t(r,n){var o,c,m,d,f,l,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.state,r.getters,c=r.rootGetters,m=r.rootState,d=r.dispatch,r.commit,f=n.burnerKey,o.checkSimpleTimes,l=m.metamask.ethAccount,h=c["metamask/networkConfig"].L2Chain,t.abrupt("return",new Promise((function(t,r){var n=function(){var r=Object(we.a)(regeneratorRuntime.mark((function r(c){var m,x,k,T,v,S,O,A,j,w,y,E,R,_,I,F,P,B;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return m=c.retryAttempt,x=void 0===m?1:m,x++,r.prev=2,k=o.gasPrice,T={method:"eth_getBalance",params:[f.address,"latest"]},r.next=7,d("metamask/sendAsync",T,{root:!0});case 7:if(v=r.sent,v=Object(Ee.hexToNumberString)(v),console.info(v),S=21e3,!h){r.next=18;break}return O={method:"eth_estimateGas",params:[{from:f.address,to:l,value:Object(Ee.toHex)(1)}],from:l},r.next=15,d("metamask/sendAsync",O,{root:!0});case 15:S=r.sent,S=Object(Ee.hexToNumber)(S),console.info(S);case 18:return A=Object(Ie.a)(v).minus(Object(Ie.a)(S).times(Object(Ie.a)(k)).times(Object(Ie.a)(10).pow(9))).toString(10),j={method:"eth_getTransactionCount",params:[f.address,"pending"]},r.next=22,d("metamask/sendAsync",j,{root:!0});case 22:return w=r.sent,r.next=25,d("getChainId");case 25:return y=r.sent,E=e.from(f.privateKey.replace("0x",""),"hex"),R={nonce:w,gasPrice:Object(Ee.toHex)(Object(Ee.toWei)(o.gasPrice.toString(),"gwei")),gasLimit:Object(Ee.numberToHex)(S),to:l,value:Object(Ee.toHex)(A),chainId:y},(_=new Pe(R)).sign(E),I=_.serialize(),F="0x"+I.toString("hex"),P={method:"eth_sendRawTransaction",params:[F]},r.next=35,d("metamask/sendAsync",P,{root:!0});case 35:B=r.sent,t(B),r.next=42;break;case 39:r.prev=39,r.t0=r.catch(2),n({retryAttempt:x});case 42:case"end":return r.stop()}}),r,null,[[2,39]])})));return function(e){return r.apply(this,arguments)}}();n({})})));case 6:case"end":return t.stop()}}),t)}))),function(e,t){return T.apply(this,arguments)}),sendTxFeeToDelegater:(k=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,r=t.dispatch,n=t.commit,e.next=3,r("_sendTxFeeToDelegater",{});case 3:return o=e.sent,n("SET_DELEGATE_TX_URL",o),n("SET_DELEGATE_TX_STATUS",0),r("checkDelegaterFeeTransactionStatus",{txHash:o}),r("common/saveUsedDelegater",{usedDelegater:!0},{root:!0}),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)}))),function(e){return k.apply(this,arguments)}),sendRemainTxFeeBack:(x=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,o=t.commit,c=r.burnerKey,e.next=4,n("_sendRemainTxFeeBack",{burnerKey:c});case 4:return m=e.sent,o("SET_REMAIN_TX_URL",m),o("SET_REMAIN_TX_STATUS",0),n("checkRemainTransactionStatus",{txHash:m}),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)}))),function(e){return x.apply(this,arguments)}),sendRemainTxFeeBackWithBurnerKey:(h=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,o=r.burnerKey,e.next=4,n("_sendRemainTxFeeBack",{burnerKey:o});case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return h.apply(this,arguments)}),sendRawTransactionWithCustomRPC:function(e,t){e.state,e.getters;var r=e.rootGetters,n=t.serializedTx;return new Promise(function(){var e=Object(we.a)(regeneratorRuntime.mark((function e(t,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r["metamask/customRPCWeb3"]();case 2:e.sent.eth.sendSignedTransaction("0x"+n.toString("hex"),(function(e,r){console.info(e),e?o(e):t(r)}));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())},signKey:(l=Object(we.a)(regeneratorRuntime.mark((function e(t){var r,n,o,c,m,d,f,l,h,x,k,data,T,v,S,O,s,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,r=t.rootState,n=t.dispatch,o=t.commit,c=r.bulksender,m=c.bulksenderAddress,d=c.burnerKey,f=r.metamask,l=f.netId,h=f.ethAccount,x=parseInt((new Date).getTime()/1e3)+604800,k={types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Agent:[{name:"delegater",type:"address"},{name:"expiration",type:"uint256"}]},primaryType:"Agent",domain:{name:"Token Bulksender",version:"1",chainId:l,verifyingContract:m},message:{delegater:d.address,expiration:x}},data=JSON.stringify(k),T={method:"eth_signTypedData_v3",params:[h,data],from:h},e.next=9,n("metamask/sendAsync",T,{root:!0});case 9:return v=e.sent,S=v.substring(2),O="0x"+S.substring(0,64),s="0x"+S.substring(64,128),A=parseInt(S.substring(128,130),16),o("SET_BURNER",[d.address,x]),o("SET_BURNER_SSINATURE",{v:A,r:O,s:s}),e.abrupt("return",!0);case 17:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)}),checkBulksenderTransactionStatus:(f=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.getters,o=t.rootGetters,t.rootState,c=t.dispatch,m=t.commit,d=r.uniqueId,f=r.txHash,l=o["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,f!=n.userDeniedTransactionMessage){e.next=10;break}m("ADD_FAILED_TXS",f),c("common/updateBulkSentStatus",{status:-2,txHash:f,uniqueId:d},{root:!0}),e.next=14;break;case 10:return e.next=12,c("metamask/getTransactionReceipt",{txHash:f},{root:!0});case 12:null!=(h=e.sent)?("0x1"==(x=h.status)||1==x?(x=1,m("ADD_SUCCESS_TXS",f)):(x=-2,m("ADD_FAILED_TXS",f)),c("common/updateBulkSentStatus",{status:x,txHash:f,uniqueId:d},{root:!0})):setTimeout((function(){c("checkBulksenderTransactionStatus",{uniqueId:d,txHash:f})}),1e3*l);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){c("checkBulksenderTransactionStatus",{uniqueId:d,txHash:f})}),1e3*l);case 20:case"end":return e.stop()}}),e,null,[[3,16]])}))),function(e,t){return f.apply(this,arguments)}),checkBulksenderVIPBuyingTransactionStatus:(d=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.txHash,d=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,console.info(m),e.next=7,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 7:null!=(f=e.sent)?("0x1"==(l=f.status)||1==l?(l=1,c("SET_IS_VIP",!0)):(l=-2,c("SET_IS_VIP",!1)),c("SET_VIP_TX_STATUS",l)):setTimeout((function(){o("checkBulksenderVIPBuyingTransactionStatus",{txHash:m})}),1e3*d),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){o("checkBulksenderVIPBuyingTransactionStatus",{txHash:m})}),1e3*d);case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e,t){return d.apply(this,arguments)}),checkDelegaterFeeTransactionStatus:(m=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.txHash,d=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,console.info(m),e.next=7,o("checkDelegaterHasReceivedFee");case 7:if(f=e.sent,console.info("Delegator Fee received",f),!f){e.next=13;break}c("SET_DELEGATE_TX_STATUS",1),e.next=31;break;case 13:return e.next=15,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 15:if(null==(l=e.sent)){e.next=30;break}if(1!=(h="0x1"==(h=l.status)||1==h?1:-2)){e.next=27;break}return e.next=22,o("checkDelegaterHasReceivedFee");case 22:x=e.sent,console.info("Delegator Fee received",x),x?c("SET_DELEGATE_TX_STATUS",h):setTimeout((function(){o("checkDelegaterFeeTransactionStatus",{txHash:m})}),1e3*d),e.next=28;break;case 27:c("SET_DELEGATE_TX_STATUS",h);case 28:e.next=31;break;case 30:setTimeout((function(){o("checkDelegaterFeeTransactionStatus",{txHash:m})}),1e3*d);case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(3),console.info("Checking error",e.t0),setTimeout((function(){o("checkDelegaterFeeTransactionStatus",{txHash:m})}),1e3*d);case 37:case"end":return e.stop()}}),e,null,[[3,33]])}))),function(e,t){return m.apply(this,arguments)}),checkRemainTransactionStatus:(c=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,n=t.rootGetters,t.rootState,o=t.dispatch,c=t.commit,m=r.txHash,d=n["metamask/networkConfig"].smartContractShortPollTime,e.prev=3,console.info(m),e.next=7,o("metamask/getTransactionReceipt",{txHash:m},{root:!0});case 7:null!=(f=e.sent)?(l=f.status,c("SET_REMAIN_TX_STATUS",l="0x1"==l||1==l?1:-2)):setTimeout((function(){o("checkRemainTransactionStatus",{txHash:m})}),1e3*d),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.info("checking error",e.t0),setTimeout((function(){o("checkRemainTransactionStatus",{txHash:m})}),1e3*d);case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e,t){return c.apply(this,arguments)}),getTransactionCount:(o=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,address,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state,t.getters,t.rootGetters,t.rootState,n=t.dispatch,t.commit,address=r.address,e.next=4,n("metamask/getTransactionCount",{address:address},{root:!0});case 4:return o=e.sent,o=Object(Ee.hexToNumberString)(o),e.abrupt("return",parseInt(o));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)}),bulkFindBadAddress:(n=Object(we.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,m,d,f,l,h,x,k,T,v,S,O,A,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,o=t.getters,c=t.rootGetters,m=t.rootState,d=t.dispatch,f=t.commit,l=r.tokenAddress,h=r.addresses,x=r.amounts,k=r.tokenIds,T=r.isCheckingBadAddressesSize,v=void 0!==T&&T,S=c["metamask/networkConfig"],O=S.rpcCallRetryAttempt,S.tokenQueryContract,A=n.simple,j=c["metamask/networkConfig"].whiteAccountList,v&&(O=2),e.abrupt("return",new Promise((function(e,t){var r=function(){var n=Object(we.a)(regeneratorRuntime.mark((function n(T){var v,S,w,y,E,R,_,I,data,F,P,B,G,H,D,C,L,U,N,K,V,X,W,z,M,Y,J,Z,Q,$,ee;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v=T.retryAttempt,S=void 0===v?1:v,S++,n.prev=2,w=m.metamask.ethAccount,(j.includes(w)||j.includes(l))&&(A=!0),n.next=7,o.bulksenderInstance();case 7:return y=n.sent,E=m.token.tokenSelected,R=c["token/isNFTToken"],_=c["token/isERC1155"],I=c["token/isERC721"],F=Object(Ie.a)("0"),P=Object(Ie.a)("0"),B=[],R||(G=E.decimals,x.forEach((function(e,t){var r=Object(Ie.a)(e).times(Object(Ie.a)(10).pow(G));B.push(r.toString(10)),P=P.plus(r)}))),E.isETH?(data=y.methods.findBadAddressesForEther(h,B).encodeABI(),F=F.plus(P)):R?(I&&(data=y.methods.findBadAddressesForERC721(l,h,k,A).encodeABI()),_&&(data=y.methods.findBadAddressesForERC1155(l,h,x,k).encodeABI())):data=y.methods.findBadAddressesForERC20(l,h,B,P.toString(10),A).encodeABI(),H=F.toString(10),D={method:"eth_call",params:[{from:w,to:y._address,data:data,value:Object(Ee.toHex)(H)},"latest"],from:w},n.next=21,d("metamask/sendAsync",D,{root:!0});case 21:C=n.sent,L=[],U=[],N=[],_?(K=Be.decodeParameters([{name:"badAddresses",type:"address[]"},{name:"badBalances",type:"uint256[]"},{name:"badTokenIds",type:"uint256[]"}],C),V=K.badAddresses,X=K.badBalances,W=K.badTokenIds,L=V,U=X,N=W):I?(z=Be.decodeParameters([{name:"badAddresses",type:"address[]"},{name:"badTokenIds",type:"uint256[]"}],C),M=z.badAddresses,Y=z.badTokenIds,L=M,N=Y):(J=Be.decodeParameters([{name:"badAddresses",type:"address[]"},{name:"badBalances",type:"uint256[]"}],C),Z=J.badAddresses,Q=J.badBalances,L=Z,U=Q),E.isETH||_?e({badAddresses:L,badBalances:U,badTokenIds:N}):($=[],ee=[],L.forEach((function(address,e){"0x0000000000000000000000000000000000000000"!=address?$.push(address):ee.push(address)})),($.length==L.length||$>ee)&&!A?(A=!0,r({retryAttempt:S})):(f("SET_SIMPLE",A),e({badAddresses:L,badBalances:U,badTokenIds:N}))),n.next=33;break;case 29:n.prev=29,n.t0=n.catch(2),A=!0,S>=O?t(n.t0):r({retryAttempt:S});case 33:case"end":return n.stop()}}),n,null,[[2,29]])})));return function(e){return n.apply(this,arguments)}}();r({})})));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})};t.default={namespaced:!0,state:function(){var e;return e={bulksenderAddress:"",txFee:2e16,isVIP:!1,vipFee:1e18,delegatorFee:1e18,addressUrl:"",txUrl:"",maxGasUsed:72e5,maxBlockByteSizeKB:28,defaultBlockConfig:{maxGasUsed:72e5,maxGasUsedSmaller:24e5,blockGasLimit:72e5,maxBytesSize:28},gasPrice:50,transferTestingCount:5,etherBatchSize:220,simple:!1,checkSimpleTimes:4,transferTestingAmounts:[1,10,100,1e3,1e4,1e5,1e6,1e7]},Object(ye.a)(e,"etherBatchSize",220),Object(ye.a)(e,"estimateETHCost",.01),Object(ye.a)(e,"vipTxHash",""),Object(ye.a)(e,"vipTxStatus",-1),Object(ye.a)(e,"txs",[]),Object(ye.a)(e,"successTxs",[]),Object(ye.a)(e,"failedTxs",[]),Object(ye.a)(e,"burnerKey",{}),Object(ye.a)(e,"usedBurnerKey",!1),Object(ye.a)(e,"burner",[]),Object(ye.a)(e,"burnerSignature",Object(ye.a)({v:27,r:""},"v","")),Object(ye.a)(e,"delegaterTxUrl",""),Object(ye.a)(e,"remainTxUrl",""),Object(ye.a)(e,"delegaterTxStatus",-1),Object(ye.a)(e,"remainTxStatus",-1),Object(ye.a)(e,"baseCallingGas",0),Object(ye.a)(e,"delegaterExtraGas",3e4),Object(ye.a)(e,"commonExtraGas",5e4),Object(ye.a)(e,"referralFee",1e16),Object(ye.a)(e,"etherDelegateCallExtraGas",0),Object(ye.a)(e,"etherSpecialAcountExtraGas",1e4),Object(ye.a)(e,"referralAddress","0x0000000000000000000000000000000000000000"),Object(ye.a)(e,"extraFee",0),Object(ye.a)(e,"walletSupportEIP1559",!0),Object(ye.a)(e,"userDeniedTransactionMessage","You rejected the transaction."),e},getters:He,mutations:{SET_BULKSENDER_ADDRESS:function(e,address){e.bulksenderAddress=address},SET_TX_FEE:function(e,t){e.txFee=t},SET_MAX_BLOCK_BYTES_SIZE:function(e,t){e.maxBlockByteSizeKB=t},SET_VIP_FEE:function(e,t){e.vipFee=t},SET_IS_VIP:function(e,t){e.isVIP=t},SET_REFERRAL_FEE:function(e,t){e.referralFee=t},SET_DELEGATOR_FEE:function(e,t){e.delegatorFee=t},SET_GAS_PRICE:function(e,t){e.gasPrice=t},SET_ADDRESS_URL:function(e,t){e.addressUrl=t},SET_TX_URL:function(e,t){e.txUrl=t},ADD_TX:function(e,t){e.txs.push(t)},ADD_SUCCESS_TXS:function(e,t){e.successTxs.push(t)},ADD_FAILED_TXS:function(e,t){e.failedTxs.push(t)},SET_SIMPLE:function(e,t){e.simple=t},SET_estimateCostPerTransfer:function(e,t){e.simple=t},SET_VIP_TX_HASH:function(e,t){e.vipTxHash=t},SET_VIP_TX_STATUS:function(e,t){e.vipTxStatus=t},SET_BURNER_KEY:function(e,t){e.burnerKey=t},SET_USED_BURNER_KEY:function(e,t){e.usedBurnerKey=t},SET_BURNER:function(e,t){e.burner=t},SET_BURNER_SSINATURE:function(e,t){e.burnerSignature=t},SET_DELEGATE_TX_URL:function(e,t){e.delegaterTxUrl=t},SET_REMAIN_TX_URL:function(e,t){e.remainTxUrl=t},SET_DELEGATE_TX_STATUS:function(e,t){e.delegaterTxStatus=t},SET_REMAIN_TX_STATUS:function(e,t){e.remainTxStatus=t},SET_REFERRAL_ADDRESS:function(e,address){e.referralAddress=address},SET_BASE_CALLING_GAS:function(e,t){e.baseCallingGas=t},SET_EXTRA_FEE:function(e,t){e.extraFee=t},SET_WALLET_SUPPORT_EIP1559:function(e,t){e.walletSupportEIP1559=t},CLEAR:function(e){e.walletSupportEIP1559=!0,e.extraFee=0,e.successTxs=[],e.failedTxs=[],e.txs=[],e.remainTxUrl="",e.delegaterTxUrl=""}},actions:De}}.call(this,r(12).Buffer)}}]);